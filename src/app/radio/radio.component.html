<div class="flex h-screen bg-gray-100">
  <!-- 確保 audio 元素在最上層 -->
  <audio #audioPlayer muted autoplay crossorigin="anonymous"></audio>
  
  <p-splitter [style]="{'height': '100vh', 'width': '100vw'}" [panelSizes]="[30,70]" [stateStorage]="'local'" [stateKey]="'splitter-state'">
    <!-- 左側電台列表面板 -->
    <ng-template pTemplate="panel1">
      <div class="h-full bg-white overflow-y-auto w-full">
        <!-- 標題 -->
        <div class="p-4 bg-gray-800 text-white sticky top-0">
          <h2 class="text-xl font-bold">電台列表</h2>
        </div>
        
        <!-- 電台列表 -->
        <div class="divide-y divide-gray-200">
          @for (station of featuredStations; track station.id) {
            <div class="station p-4 hover:bg-gray-50 cursor-pointer"
                 [class.bg-blue-50]="currentStation?.name === station.name"
                 (click)="selectStation(station)">
              <div>
                <strong class="text-lg">{{ station.name }}</strong>
                <div class="mt-2">
                  @if (station.tags) {
                    @for (tag of (Array.isArray(station.tags) ? station.tags : [station.tags]); track tag) {
                      <p-tag [value]="tag" class="mr-1" severity="info"></p-tag>
                    }
                  }
                </div>
              </div>
            </div>
          }
        </div>
      </div>
    </ng-template>

    <!-- 右側播放控制面板 -->
    <ng-template pTemplate="panel2">
      <div class="w-full h-full flex items-center justify-center p-4">
        <p-card [style]="{'width': '100%'}" class="w-full">
          <ng-template pTemplate="header">
            <div class="text-center p-4">
              <h3 class="text-2xl font-bold">{{ currentStation?.name || '未選擇電台' }}</h3>
              @if (currentStation?.tags) {
                <div class="mt-2">
                  @for (tag of (Array.isArray(currentStation.tags) ? currentStation.tags : [currentStation.tags]); track tag) {
                    <p-tag [value]="tag" class="mr-1" severity="info"></p-tag>
                  }
                </div>
              }
            </div>
          </ng-template>

          <!-- 音量控制 -->
          <div class="mb-4">
            <div class="flex items-center gap-2">
              <i class="pi pi-volume-down cursor-pointer" (click)="adjustVolume(-0.1)"></i>
              <p-slider class="flex-1" [ngModel]="volume * 100" (onChange)="onVolumeChange($event)"></p-slider>
              <i class="pi pi-volume-up cursor-pointer" (click)="adjustVolume(0.1)"></i>
            </div>
          </div>

        </p-card>
      </div>
    </ng-template>
  </p-splitter>
</div>
